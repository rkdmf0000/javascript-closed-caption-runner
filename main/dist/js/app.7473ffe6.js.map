{"version":3,"file":"js/app.7473ffe6.js","mappings":"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","sources":["webpack://main/./node_modules/subsrt/lib/format/ sync ^\\.\\/.*\\.js$","webpack://main/./src/components/v1.vue","webpack://main/./src/components/v1.vue?a763","webpack://main/./src/App.vue?2a5e","webpack://main/./src/App.vue","webpack://main/./src/main.ts","webpack://main/webpack/bootstrap","webpack://main/webpack/runtime/chunk loaded","webpack://main/webpack/runtime/compat get default export","webpack://main/webpack/runtime/define property getters","webpack://main/webpack/runtime/global","webpack://main/webpack/runtime/hasOwnProperty shorthand","webpack://main/webpack/runtime/make namespace object","webpack://main/webpack/runtime/jsonp chunk loading","webpack://main/webpack/startup"],"sourcesContent":["var map = {\n\t\"./ass.js\": 8415,\n\t\"./json.js\": 6129,\n\t\"./lrc.js\": 5061,\n\t\"./sbv.js\": 3079,\n\t\"./smi.js\": 3088,\n\t\"./srt.js\": 4255,\n\t\"./ssa.js\": 8726,\n\t\"./sub.js\": 3944,\n\t\"./vtt.js\": 2661\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 5281;","\n<script>\nimport { YoutubeVue3 } from 'youtube-vue3';\nimport { WebVTTParser } from 'webvtt-parser';\nimport subsrt from 'subsrt'\n\n//https://github.com/papnkukn/subsrt\n\n\n//smi example : https://raw.githubusercontent.com/rkdmf0000/javascript-closed-caption-runner/main/main/dist/test1.smi\n//싱크 : -316.5\n\n//srt exmaple : https://raw.githubusercontent.com/rkdmf0000/cc-collection/main/back%20number%20-%20%E6%B0%B4%E5%B9%B3%E7%B7%9A.srt\n//싱크 : 0\n\nexport default {\n\n    name: 'App',\n    data() {\n        const getParam = this.getQueryParams();\n        return {\n            window: window,\n            debug: (getParam[\"debug\"] == \"1\" ? true : false),\n            playingFlag: false,\n            video: { video_id: \"\", loop: 1 },\n            currentTime: 0,\n            timeCheck: 1000 / 30,\n            timer: undefined,\n            vtt: [],\n            videoIframe: undefined,\n            currentCC: [],\n            timeSync: Number(getParam[\"cc_sync\"]) ?? 0,\n            ccEncoding: getParam[\"cc_encode\"] ?? \"utf-8\",\n            ccPath: getParam[\"cc_uri\"] ?? \"https://raw.githubusercontent.com/rkdmf0000/cc-collection/main/back%20number%20-%20%E6%B0%B4%E5%B9%B3%E7%B7%9A.srt\"\n        }\n    },\n    async mounted() {\n        this.video.video_id = location.hash.substring(1, 99);\n        this.video.loop = 1;\n\n        this.window.addEventListener('message', function(data) {\n            console.log(data.origin);\n            if (data.origin == \"https://www.youtube.com\") {\n                console.log(JSON.parse(data.data));\n            }\n        });\n\n\n        console.log(this.$refs.youtube.player);\n        this.$refs.youtube.player.on(\"ready\", async ()=>{\n            this.videoIframe = await this.$refs.youtube.player.getIframe();\n\n\n\n            console.log(this.videoIframe.contentWindow.postMessage());\n        })\n\n\n\n        //ytp-caption-window-container\n\n        this.getRequest(this.ccPath)\n            .then(response => {\n\n                const vtt = subsrt.convert(response, { format: \"vtt\", fps: 25 });\n                const captions = this.parseSmiFile(vtt);\n                this.vtt = captions;\n\n            })\n            .catch(error => {\n                console.error(error);\n            });\n\n\n\n    },\n    components: {\n        YoutubeVue3,\n    },\n    methods: {\n\n        getCaptionsInRange(captions, timeline) {\n\n            return captions.filter((caption) => {\n                return caption.start <= timeline && caption.end >= timeline;\n            });\n        },\n\n        replaceNewLineWithBreak(str) {\n            return str.replace(/\\n/g, \"<br>\");\n        },\n\n        getRequest(url) {\n            return new Promise((resolve, reject) => {\n                const xhr = new XMLHttpRequest();\n\n                xhr.overrideMimeType(` text/plain; charset=${this.ccEncoding}`); // Content-Type을 UTF-8로 설정\n\n                xhr.onreadystatechange = function () {\n                    if (this.readyState === XMLHttpRequest.DONE) {\n                        if (this.status >= 200 && this.status < 300) {\n                            resolve(xhr.responseText);\n                        } else {\n                            reject(new Error(`Request failed with status code: ${xhr.status}`));\n                        }\n                    }\n                };\n\n                xhr.open('GET', url, true);\n                xhr.send();\n            });\n        },\n\n\n        parseSmiFile(smiContent) {\n            const parser = new WebVTTParser();\n\n            // Parse the SMI content into WebVTT format\n            const tree = parser.parse(smiContent);\n\n            // Extract the captions from the WebVTT format\n            const captions = tree.cues.map((cue) => ({\n                start: cue.startTime + this.timeSync, // Convert to milliseconds\n                end: cue.endTime + this.timeSync, // Convert to milliseconds\n                text: cue.text,\n            }));\n\n            return captions;\n        },\n\n\n\n\n        // SMI 파일을 VTT 파일로 변환하는 함수\n        smiToVtt(smiContent) {\n            // SMI 파일의 자막 데이터 부분 추출\n            const syncRegex = /<sync start=(\\d+)><p[^>]*>(.*?)<\\/p>/g;\n            let match;\n            let vttContent = \"WEBVTT\\n\\n\"; // VTT 파일의 시작 부분\n            while ((match = syncRegex.exec(smiContent)) !== null) {\n                const start = this.convertMillisecondsToVttTime(match[1]);\n                const text = match[2].replace(/(<br>)+/gi, \"\\n\"); // <br> 태그를 개행 문자로 변환\n                const end = this.convertMillisecondsToVttTime(parseInt(match[1], 10) + text.length * 100); // VTT는 종료 시간을 지정해야 함\n                vttContent += `${start} --> ${end}\\n${text}\\n\\n`;\n            }\n            return vttContent;\n        },\n\n        // 밀리초 단위를 VTT 시간 형식으로 변환하는 함수\n        convertMillisecondsToVttTime(milliseconds) {\n            const hours = Math.floor(milliseconds / (60 * 60 * 1000));\n            const minutes = Math.floor(milliseconds / (60 * 1000)) % 60;\n            const seconds = Math.floor(milliseconds / 1000) % 60;\n            const ms = (milliseconds % 1000).toString().padStart(3, \"0\");\n            return `${hours.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}.${ms}`;\n        },\n\n\n\n\n\n        startTimer() {\n            this.timer = setInterval(() => {\n                this.timerAction();\n            }, this.timeCheck);\n        },\n        stopTimer() {\n            clearTimeout(this.timer);\n        },\n\n        async timerAction() {\n            \n            const sec = await this.$refs.youtube.player.getCurrentTime();\n            this.currentTime = sec;\n\n            this.currentCC = [];\n            if (this.vtt.length != 0) {\n                const arr = this.getCaptionsInRange(this.vtt, this.currentTime);\n                if (arr.length != 0) {\n                    arr.map((buffer) => {\n                        // console.log(buffer.text);\n                        this.currentCC.push(buffer.text);\n                    })\n                }\n            }\n\n\n        },\n        getQueryParams() {\n            const queryParams = {};\n            const searchParams = new URLSearchParams(location.search);\n\n            for (let [param, value] of searchParams.entries()) {\n                if (queryParams[param]) {\n                    if (Array.isArray(queryParams[param])) {\n                        queryParams[param].push(value);\n                    } else {\n                        queryParams[param] = [queryParams[param], value];\n                    }\n                } else {\n                    queryParams[param] = value;\n                }\n            }\n\n            return queryParams;\n        },\n        convertTimeToSeconds(timeStr) {\n            const timeArr = timeStr.split(':').map(parseFloat);\n            const hours = timeArr[0] * 3600;\n            const minutes = timeArr[1] * 60;\n            const seconds = timeArr[2] + (timeArr[3] / 1000);\n            const totalSeconds = hours + minutes + seconds;\n            return parseFloat(totalSeconds.toFixed(5));\n        },\n\n        //wlTMXFbPfKw\n        applyConfig() {\n            this.video = {\n                loop: 0,\n                video_id: \"iqEr3P78fz8\"\n            }\n        },\n        playCurrentVideo() {\n            this.$refs.youtube.player.playVideo();\n        },\n        stopCurrentVideo() {\n            this.$refs.youtube.player.stopVideo();\n        },\n        pauseCurrentVideo() {\n            this.$refs.youtube.player.pauseVideo();\n\n        },\n        onReady(){\n            console.log(\"## onReady\")\n        },\n        onPlayed() {\n            console.log(\"## OnPlayed\")\n            this.startTimer();\n            this.playingFlag = true;\n        },\n        onEnded() {\n            console.log(\"## OnEnded\")\n            this.stopTimer();\n            this.playingFlag = false;\n        },\n        onPaused() {\n            console.log(\"## OnPaused\")\n            this.stopTimer();\n            this.playingFlag = false;\n        },\n\n    },\n}\n</script>\n\n\n<template>\n    <YoutubeVue3 style=\"z-index:1; position:fixed;top:0;bottom:0;left:0;right:0;\" ref=\"youtube\" :controls=\"1\"\n        :videoid=\"video.video_id\" :loop=\"video.loop\" :width=\"window.innerWidth\" :height=\"window.innerHeight\"\n        @ended=\"onEnded\" @paused=\"onPaused\" @played=\"onPlayed\" @ready=\"onReady\"  />\n\n\n    <div v-if=\"debug\"\n        style=\"z-index:1;position:fixed;top:0;left:0;background-color:#fafafa;border-top:1px solid #ddd;padding:8px 16px;\">\n        <div>\n            디버그 모드 : {{ debug }}\n        </div>\n\n        <div>\n            <!--youtube.player.getCurrentTime()-->\n            <label>재생 시간</label>\n            <div>\n                ({{ convertMillisecondsToVttTime(currentTime * 1000) }})\n            </div>\n        </div>\n\n        <br />\n        <hr />\n\n        <div>\n\n            비디오 상태 : {{ video }}<br />\n            갱신 주기 : {{ timeCheck }}<br />\n            타이머 아이디 : {{ timer }}<br />\n            타임 싱크 : {{ timeSync }}<br />\n            자막 경로 : {{ ccPath }}<br />\n            자막 인코딩 : {{ ccEncoding }}<br />\n        </div>\n\n        <div>\n            실시간 자막 :\n            {{ currentCC }}\n        </div>\n\n        <button @click=\"applyConfig\">적용</button>\n        <button @click=\"playCurrentVideo\">재생</button>\n        <button @click=\"stopCurrentVideo\">중지</button>\n        <button @click=\"pauseCurrentVideo\">정지</button>\n\n    </div>\n\n    <div v-if=\"playingFlag\" style=\"z-index:2;position:fixed;bottom:10%;left:0;right:0;\">\n        <div style=\"position:absolute;bottom:0;left:0;font-size: 16px;left: 50%;transform: translateX(-50%);\"\n            class=\"ccarea\">\n            <div v-for=\"(buffer, index) in currentCC\" :key=\"index\">\n                <p style=\"background: rgb(0 0 0 / 69%);color:#fafafa;\" v-html=\"replaceNewLineWithBreak(buffer)\"></p>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style>\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    position: relative;\n}\n\n\n</style>\n\n<style scoped>\n.ccarea {\n    display: block;\n    text-align: center;\n}\n\n.ccarea * {\n    display: block;\n}\n</style>","import { render } from \"./v1.vue?vue&type=template&id=41d3db6d&scoped=true\"\nimport script from \"./v1.vue?vue&type=script&lang=js\"\nexport * from \"./v1.vue?vue&type=script&lang=js\"\n\nimport \"./v1.vue?vue&type=style&index=0&id=41d3db6d&lang=css\"\nimport \"./v1.vue?vue&type=style&index=1&id=41d3db6d&scoped=true&lang=css\"\n\nimport exportComponent from \"/workspaces/javascript-closed-caption-runner/main/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41d3db6d\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport frame from './components/v1.vue';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(frame))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3edd1828&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmain\"] = self[\"webpackChunkmain\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1656); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","style","_createElementVNode","class","_createVNode","_component_YoutubeVue3","ref","controls","videoid","$data","video","video_id","loop","width","window","innerWidth","height","innerHeight","onEnded","$options","onPaused","onPlayed","onReady","debug","_createElementBlock","_hoisted_1","_toDisplayString","_hoisted_2","convertMillisecondsToVttTime","currentTime","_hoisted_3","_hoisted_4","_hoisted_5","timeCheck","_hoisted_6","timer","_hoisted_7","timeSync","_hoisted_8","ccPath","_hoisted_9","ccEncoding","_hoisted_10","currentCC","onClick","_cache","args","applyConfig","playCurrentVideo","stopCurrentVideo","pauseCurrentVideo","playingFlag","_hoisted_11","_hoisted_12","_Fragment","_renderList","buffer","index","key","innerHTML","replaceNewLineWithBreak","name","data","getParam","this","getQueryParams","undefined","vtt","videoIframe","Number","async","location","hash","substring","addEventListener","console","log","origin","JSON","parse","$refs","youtube","player","on","getIframe","contentWindow","postMessage","getRequest","then","response","subsrt","format","fps","captions","parseSmiFile","catch","error","components","YoutubeVue3","methods","getCaptionsInRange","timeline","filter","caption","start","end","str","replace","url","Promise","reject","xhr","XMLHttpRequest","overrideMimeType","onreadystatechange","readyState","DONE","status","responseText","open","send","smiContent","parser","WebVTTParser","tree","cues","cue","startTime","endTime","text","smiToVtt","syncRegex","match","vttContent","exec","parseInt","length","milliseconds","hours","Math","floor","minutes","seconds","ms","toString","padStart","startTimer","setInterval","timerAction","stopTimer","clearTimeout","sec","getCurrentTime","arr","push","queryParams","searchParams","URLSearchParams","search","param","value","entries","Array","isArray","convertTimeToSeconds","timeStr","timeArr","split","parseFloat","totalSeconds","toFixed","playVideo","stopVideo","pauseVideo","__exports__","render","_defineComponent","__name","setup","__props","_ctx","_openBlock","_createBlock","frame","createApp","App","mount","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}